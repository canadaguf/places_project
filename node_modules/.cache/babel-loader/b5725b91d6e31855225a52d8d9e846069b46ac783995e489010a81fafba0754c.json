{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{TextField,Button,Typography,Box,CircularProgress}from'@mui/material';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setIsLoggedIn}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);// Loading state\nconst navigate=useNavigate();const handleLogin=async()=>{setLoading(true);// Start loading\ntry{const response=await axios.post('http://localhost:5000/api/login',{username,password});const{token}=response.data;localStorage.setItem('token',token);// Store token in localStorage\nsetIsLoggedIn(true);// Update login state\nnavigate('/');// Navigate to homepage\n}catch(error){if(error.response){setMessage(error.response.data.message||'Login failed');}else{setMessage('Network error or server not responding');}}finally{setLoading(false);// Stop loading\n}};return/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"100vh\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Login\"}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",variant:\"outlined\",value:username,onChange:e=>setUsername(e.target.value),margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",variant:\"outlined\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value),margin:\"normal\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleLogin,disabled:loading// Disable button while loading\n,children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Login'}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"error\",marginTop:2,children:message})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","TextField","Button","Typography","Box","CircularProgress","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_ref","setIsLoggedIn","username","setUsername","password","setPassword","message","setMessage","loading","setLoading","navigate","handleLogin","response","post","token","data","localStorage","setItem","error","display","flexDirection","alignItems","justifyContent","minHeight","children","variant","gutterBottom","label","value","onChange","e","target","margin","type","color","onClick","disabled","size","marginTop"],"sources":["C:/Users/Ilya/places_project/src/scenes/auth/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { TextField, Button, Typography, Box, CircularProgress } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Login({ setIsLoggedIn }) {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false); // Loading state\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async () => {\r\n    setLoading(true); // Start loading\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/login', {\r\n        username,\r\n        password,\r\n      });\r\n\r\n      const { token } = response.data;\r\n      localStorage.setItem('token', token); // Store token in localStorage\r\n      setIsLoggedIn(true); // Update login state\r\n      navigate('/'); // Navigate to homepage\r\n    } catch (error) {\r\n      if (error.response) {\r\n        setMessage(error.response.data.message || 'Login failed');\r\n      } else {\r\n        setMessage('Network error or server not responding');\r\n      }\r\n    } finally {\r\n      setLoading(false); // Stop loading\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      minHeight=\"100vh\"\r\n    >\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Login\r\n      </Typography>\r\n      <TextField\r\n        label=\"Username\"\r\n        variant=\"outlined\"\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        margin=\"normal\"\r\n      />\r\n      <TextField\r\n        label=\"Password\"\r\n        variant=\"outlined\"\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        margin=\"normal\"\r\n      />\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={handleLogin}\r\n        disabled={loading} // Disable button while loading\r\n      >\r\n        {loading ? <CircularProgress size={24} /> : 'Login'}\r\n      </Button>\r\n      <Typography variant=\"body1\" color=\"error\" marginTop={2}>\r\n        {message}\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}